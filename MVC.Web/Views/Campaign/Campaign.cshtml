
@{
    ViewBag.Title = "Campaign";
    Layout = "~/Views/Shared/_MainMasterLayout.cshtml";
}


<!-- start page title -->
<div class="row">
    <div class="col-12">
        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
            <h4 class="mb-sm-0">Campaign</h4>

            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">Campaign</a></li>
                    <li class="breadcrumb-item active">New Campaign</li>
                </ol>
            </div>

        </div>
    </div>
</div>
<!-- end page title -->

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">BASIC DETAILS</h4>
            </div>
            <!-- end card header -->
            <div class="card-body">
                <div class="live-preview">
                    <div class="row gy-4">
                        <div class="col-xxl-3 col-md-6">
                            <div>
                                <label for="basiInput" class="form-label">Campaign Name</label>
                                <input type="text" class="form-control" placeholder="e.g. XYZ"
                                       id="txtCampaignTitle">
                            </div>
                        </div>
                        <div class="col-xxl-3 col-md-6">
                            <div>
                                <label for="basiInput" class="form-label">Campaign Type</label>
                                @*<select class="form-select" id="inputGroupSelect01"
                                        fdprocessedid="h92ukl">
                                    <option selected="">--Select Campaign Type--</option>
                                    <option value="1">One</option>
                                    <option value="2">Two</option>
                                    <option value="3">Three</option>
                                </select>*@

                                @Html.DropDownList("ddlCampaignType", (IEnumerable<SelectListItem>)ViewBag.CampaignTypeMaster, "--Select--", new { @class = "form-select", @id = "ddlCampaignType", name = "ddlCampaignType", autocomplete = "off" })
                            </div>
                        </div>
                   
                        <div class="col-xxl-3 col-md-6">
                            <div>
                                <label for="basiInput" class="form-label">Priority</label>
                                @*<select class="form-select" id="inputGroupSelect01"
                                        fdprocessedid="h92ukl">
                                    <option selected="">--Select Priority Type--</option>
                                    <option value="1">One</option>
                                    <option value="2">Two</option>
                                    <option value="3">Three</option>
                                </select>*@
                                @Html.DropDownList("ddlPriorityType", (IEnumerable<SelectListItem>)ViewBag.PriorityTypeMaster, "--Select--", new { @class = "form-select", @id = "ddlPriorityType", name = "ddlPriorityType", autocomplete = "off" })
                            </div>
                        </div>
                     
                        <!--end col-->
                        <!--<div class="col-xxl-3 col-md-6">
                            <div>
                                <label for="placeholderInput" class="form-label">
                                    Campaign
                                    Manager
                                </label>
                                <input type="text" tabindex="1" id="manager">-->
                                <!-- <input type="text" class="form-control" id="placeholderInput" placeholder="Placeholder"> -->
                            <!--</div>
                        </div>-->
                        <div class="col-xxl-3 col-md-6">
                            <div>
                                <label for="placeholderInput" class="form-label">
                                    Assign
                                    Users
                                </label>
                                @*<input type="text" tabindex="1" id="assignuser">*@
                                @Html.DropDownList("ddlUsrList", (IEnumerable<SelectListItem>)ViewBag.UserList, "--Select--", new { @class = "form-select", @id = "ddlUsrList", name = "ddlUsrList", autocomplete = "off" })
                                <!-- <input type="text" class="form-control" id="placeholderInput" placeholder="Placeholder"> -->
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">ADVANCED SETTINGS</h4>
            </div>
            <!-- end card header -->
            <div class="card-body">
                <div class="live-preview">
                    <div class="row gy-4">

                        <div class="col-xxl-6 col-md-6">

                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="flexRadioDefault"
                                       id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault1">
                                    Auto-assign (Recommended)
                                    <a href="#" data-toggle="tooltip" title="Hooray!"><i class="fa-solid fa-circle-info tootipclr"></i></a>
                                </label>
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-xxl-6 col-md-6">
                            <!-- Base Radios -->
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="flexRadioDefault"
                                       id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault1">
                                    Equally Distribute leads all users in a campaign
                                    <a href="#" data-toggle="tooltip" title="Hooray!"><i class="fa-solid fa-circle-info tootipclr"></i></a>
                                </label>
                            </div>
                        </div>

                        <div class="col-xxl-6 col-md-6">
                            <!-- Base Radios -->
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="flexRadioDefault"
                                       id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault1">
                                    1 by 1 Leads Distribution among all users in a campaign
                                    <a href="#" data-toggle="tooltip" title="Hooray!"><i class="fa-solid fa-circle-info tootipclr"></i></a>
                                </label>

                            </div>
                        </div>

                        <div class="col-xxl-6 col-md-6">
                            <!-- Base Radios -->
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" checked name="flexRadioDefault"
                                       id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault1">
                                   None
                                    <a href="#" data-toggle="tooltip" title="Hooray!"><i class="fa-solid fa-circle-info tootipclr"></i></a>
                                </label>

                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>

        <div class="col-xxl-12" style="display: flex;justify-content: center;">
            <button type="button" style="margin-right:10px;" class="btn btn-success w-md bg-gradient waves-effect waves-light" onclick="SaveDetails();">Save </button>
            @*<button type="button" class="btn btn-outline-success w-md waves-effect waves-light shadow-none" disabled>Next</button>*@
        </div>

    </div>

</div>

<script>
     function SaveDetails() {
      
             var isValid = true;
             var CampaignTitle = $("#txtCampaignTitle").val();
             var CampaignType = $("#ddlCampaignType").val();
             var PriorityType = $("#ddlPriorityType").val();
             var AssignedUser = $("#ddlUsrList").val();


             if (CampaignTitle == "") {

                 $("#txtCampaignTitle").addClass("form-control is-invalid state-invalid");
                 isValid = false;
                 return false;
             } else {
                 $("#txtCampaignTitle").removeClass("is-invalid state-invalid");
             }

                   if (CampaignType == "") {

                 $("#ddlCampaignType").addClass("form-select is-invalid state-invalid");
                 isValid = false;
                 return false;
             } else {
                 $("#ddlCampaignType").removeClass("is-invalid state-invalid");
             }
           if (PriorityType == "") {

                 $("#ddlPriorityType").addClass("form-select is-invalid state-invalid");
                 isValid = false;
                 return false;
             } else {
                 $("#ddlPriorityType").removeClass("is-invalid state-invalid");
             }
           if (AssignedUser == "") {

                 $("#ddlUsrList").addClass("form-select is-invalid state-invalid");
                 isValid = false;
                 return false;
             } else {
                 $("#ddlUsrList").removeClass("is-invalid state-invalid");
             }

             if (isValid) {

                 var CampaignDetails = {};
                 CampaignDetails.CampaignName = CampaignTitle;
                 CampaignDetails.CampaignTypeID = CampaignType;
                 CampaignDetails.CampaignPriorityID = PriorityType;
                 CampaignDetails.CampaignAssignedUserID = AssignedUser;
                 CampaignDetails.DistributionTypeID = 0;
                 CampaignDetails.CampaignStatusID = 0;


                 $.ajax({
                     url: "/Campaign/SaveCampaignDetails",
                     data: '{campaignDetail: ' + JSON.stringify(CampaignDetails) + '}',
                     type: "POST",
                     contentType: "application/json; charset=utf-8",
                     dataType: "json",
                     success: function (response) {
                        console.log(response);
                              if (response.Status != 0) {


                                            Swal.fire("Campaign!", response.Message, "success").then(function () {
                              window.location.href = '@Url.Action("Campaign", "Campaign")';

                          });
                                        } else {
                                            alert("Record not saved.");
                                            //window.location.reload();
                                        }



                     },
                     error: function (error) {
                         let str = error.responseText;
                         var a = str.indexOf("<title>") + 7;
                         var b = str.indexOf("</title>");
                         str = str.substring(a, b);
                         alert("Something went wrong: " + str);
                     }
                 });
             }

    }

</script>


